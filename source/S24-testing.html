<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>Synopsis 24: Testing</title>
</head>
<div class="pod">
<h1 id="TITLE">TITLE</h1>
<div id="TITLE_CONTENT">
<p>Synopsis 24: Testing</p>
</div>
<h1 id="AUTHORS">AUTHORS</h1>
<div id="AUTHORS_CONTENT">
<pre>Moritz Lenz &lt;moritz@faui2k3.org&gt;
Carl MÃ¤sak &lt;cmasak@gmail.com&gt;
</pre>
</div>
<h1 id="VERSION">VERSION</h1>
<div id="VERSION_CONTENT">
<pre>Created: 30 Dec 2010

Last Modified: 31 Dec 2010
Version: 6
</pre>
</div>
<h1 id="SYNOPSIS">SYNOPSIS</h1>
<div id="SYNOPSIS_CONTENT">
<pre>use Test;

plan 6;

ok True, 'True is a true value';
nok False, 'False is a false value';
is 'ab'.uc, 'AB', 'successful string comparison';
is_approx 2.sqrt, 1.4142135623, 'Approximate numeric comparison';
dies_ok { die &quot;yes&quot;}, 'exceptions';
eval_dies_ok '1 1', 'two terms in a row are a parse error';



</pre>
</div>
<h1 id="DESCRIPTION">DESCRIPTION</h1>
<div id="DESCRIPTION_CONTENT">
<p>Perl 6 comes with a standard testing module, <code>Test</code>. It is the testing module
used by the official spectest suite.</p>
<p>The testing functions emit output conforming to the Test Anything
Protocol. See <a href="http://testanything.org">http://testanything.org</a>.</p>
<p>For the purposes of this document, a <i>test file</i> is a file that does
<code>use Test</code>.</p>
</div>
<h2 id="Test_plans">Test plans</h2>
<div id="Test_plans_CONTENT">
<pre>sub plan($number_of_tests) is export { ... };
sub done() is export { ... };
</pre>
<p>In order to determine whether a test file ran all its tests, a <code>plan</code> function
call can be made somewhere in the test file, providing a count of the total
number of tests. A TAP harness can then flag an error condition when the number
of tests actually run doesn't match.</p>
<p>If <code>plan</code> isn't called, <code>done</code> can be called at the end of the test
file to output an automatically computed tally.</p>
<p>A TAP harness will consider it an error if neither <code>plan</code> nor
<code>done</code> was called, or if there was more than one call in the test
file, or if the call occurred between calling two test functions
(rather than at the beginning or at the end).</p>
</div>
<h2 id="Test_functions">Test functions</h2>
<div id="Test_functions_CONTENT">
<p>All test functions take an optional description argument, which
will be printed along with the <code>ok</code> or <code>not ok</code> result and the test
number. Note that what is displayed as optional parameters in the list
below might as well be implemented by some other mechanism, such as
several <code>multi sub</code>s. Such details are left as implementation-dependent.</p>
<p>The names of positional parameters are non-normative, so supplying the
positional arguments to these test files by name is discouraged.</p>
<p>All of the following functions are exported by default:</p>
<pre># unconditional passing/failing
pass($desc?)
flunk($desc?)

# evaluates $cond in boolean context
ok(Mu $cond, $desc?)
nok(Mu $cond, $desc?)

# string comparison
is(Mu $got, Mu $expected, $desc?)
isnt(Mu $got, Mu $expected, $desc?)

# structural comparison with infix:&lt;eqv&gt;
is_deeply(Mu $got, Mu $expected, $desc?)

# numeric comparison with 1e-5
is_approx(Mu $got, Mu $expected, $desc?)

# class membership testing
# converts the type name to an actual type object
# if $type ~~ Str
isa_ok(Mu $var, Mu $type, $desc?)

# exception testing
lives_ok(Callable $code, $desc?)
dies_ok(Callable $code, $desc?)

# eval + exception testing
eval_lives_ok(Str $code, $desc?)
eval_dies_ok(Str $code, $desc?)
</pre>
<p>These functions work roughly the same way as the functions of the same
name from Perl 5's <cite>Test::More</cite> and <cite>Test::Exception</cite> modules.</p>
<p>TODO: more precise explanation</p>
</div>
<h2 id="todo_and_skip">todo() and skip() </h2>
<div id="todo_and_skip_CONTENT">
<p>TODO</p>
</div>
</div>
</body>
</html>
