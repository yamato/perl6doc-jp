<!DOCTYPE html>
<html lang="ja">
<head>
<title>S29-functions</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
<link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/github.min.css">
<link rel="stylesheet" href="default.css">
<script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
<script>hljs.configure( { languages: ['perl'] } ); hljs.initHighlightingOnLoad();</script>
</head>
<body class='pod'>
<!--
  generated by My::Pod v,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.018002 at Sat Aug 30 10:16:52 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to My::Pod, and/or subclassing My::Pod,
   then reconverting this document from the Pod source.
   When in doubt, email the author of My::Pod for advice.
   See 'perldoc My::Pod' for more info.

-->

<!-- start doc -->
<a name='___top' class='dummyTopAnchor' ></a>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#TITLE'>TITLE</a>
  <li class='indexItem indexItem1'><a href='#AUTHORS'>AUTHORS</a>
  <li class='indexItem indexItem1'><a href='#Version'>Version</a>
  <li class='indexItem indexItem1'><a href='#Notes'>Notes</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Operators_vs._Functions'>Operators vs. Functions</a>
    <li class='indexItem indexItem2'><a href='#Multis_vs._Functions'>Multis vs. Functions</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#Type_Declarations'>Type Declarations</a>
  <li class='indexItem indexItem1'><a href='#Function_Packages'>Function Packages</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#Context'>Context</a>
    <li class='indexItem indexItem2'><a href='#Conversions'>Conversions</a>
    <li class='indexItem indexItem2'><a href='#OS'>OS</a>
    <li class='indexItem indexItem2'><a href='#Concurrency'>Concurrency</a>
    <li class='indexItem indexItem2'><a href='#Pending_Apocalypse'>Pending Apocalypse</a>
    <li class='indexItem indexItem2'><a href='#Default_Functions'>Default Functions</a>
    <li class='indexItem indexItem2'><a href='#Non-default_Functions'>Non-default Functions</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Container'>Container</a>
      <li class='indexItem indexItem3'><a href='#Numeric'>Numeric</a>
      <li class='indexItem indexItem3'><a href='#IO'>IO</a>
      <li class='indexItem indexItem3'><a href='#Temporal'>Temporal</a>
      <li class='indexItem indexItem3'><a href='#String'>String</a>
    </ul>
    <li class='indexItem indexItem2'><a href='#Obsolete_Functions'>Obsolete Functions</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#Keywords'>Keywords</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#Default_Export_Questions'>Default Export Questions</a>
  <li class='indexItem indexItem1'><a href='#Additions'>Additions</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TITLE"
>TITLE</a></h1>

<p>Synopsis 29: Builtin Functions</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="AUTHORS"
>AUTHORS</a></h1>

<pre><code>Rod Adams &#60;rod@rodadams.net&#62;
Larry Wall &#60;larry@wall.org&#62;
Aaron Sherman &#60;ajs@ajs.com&#62;
Mark Stosberg &#60;mark@summersault.com&#62;
Carl M&#228;sak &#60;cmasak@gmail.com&#62;
Moritz Lenz &#60;moritz@faui2k3.org&#62;
Tim Nelson &#60;wayland@wayland.id.au&#62;
Carlin Bingham &#60;carlin@theintersect.org&#62;
Elizabeth Mattijsen &#60;liz@dijkmat.nl&#62;</code></pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Version"
>Version</a></h1>

<pre><code>Created: 12 Mar 2005

Last Modified: 11 August 2014
Version: 62</code></pre>

<p>The document is a draft.</p>

<p>If you read the HTML version, it is generated from the Pod in the specs repository under <a href="https://github.com/perl6/specs/blob/master/S29-functions.pod" class="podlinkurl"
>https://github.com/perl6/specs/blob/master/S29-functions.pod</a> so edit it there in the git repository if you would like to make changes.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Notes"
>Notes</a></h1>

<p>In Perl 6, all builtin functions belong to a named package (generally a class or role). Not all functions are guaranteed to be imported into the CORE scope. In addition, the list of functions imported into <code>CORE</code> will be subject to change with each release of Perl. Authors wishing to &#34;Future Proof&#34; their code should either specifically import the functions they will be using, or always refer to the functions by their full name.</p>

<p>After 6.0.0 comes out, global aliases will not be removed lightly, and will never be removed at all without having gone through a deprecation cycle of at least a year. In any event, you can specify that you want the interface for a particular version of Perl, and that can be emulated by later versions of Perl to the extent that security updates allow.</p>

<p>Where code is given here, it is intended to define semantics, not to dictate implementation.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Operators_vs._Functions"
>Operators vs. Functions</a></h2>

<p>There is no particular difference between an operator and a function, but for the sake of documentation, only functions declared without specifying a grammatical category or with a category of <code>term:</code> (see <a href="http://search.cpan.org/perldoc?S02#Bits_and_Pieces" class="podlinkpod"
>&#34;Bits and Pieces&#34; in S02</a>) will be described as &#34;functions&#34;, and everything else as &#34;operators&#34; which are outside of the scope of this document. (See S03 for operators.)</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Multis_vs._Functions"
>Multis vs. Functions</a></h2>

<p>In actual fact, most of the &#34;functions&#34; defined here are multi subs, or are multi methods that are also exported as multi subs. The Setting is responsible for importing all the standard multi subs from their various packages into the CORE lexical scope. See S02.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Type_Declarations"
>Type Declarations</a></h1>

<p>The following type declarations are assumed:</p>

<dl>
<dt><a name="AnyChar"
>AnyChar</a></dt>

<dd>
<p>The root class of all &#34;character&#34; types, regardless of level.</p>

<p>This is a subtype of <code>Str</code>, limited to a length of 1 at its highest supported Unicode level.</p>

<p>The type name <code>Char</code> is aliased to the maximum supported Unicode level in the current lexical scope (where &#34;current&#34; is taken to mean the eventual lexical scope for generic code (roles and macros), not the scope in which the generic code is defined). In other words, use <code>Char</code> when you don&#39;t care which level you&#39;re writing for.</p>

<p>Subclasses (things that are <code>isa AnyChar</code>):</p>

<dl>
<dt><a name="CharLingua_(language-defined_characters)"
>CharLingua (language-defined characters)</a></dt>

<dd>
<dt><a name="Grapheme_(language-independent_graphemes)"
>Grapheme (language-independent graphemes)</a></dt>

<dd>
<dt><a name="Codepoint"
>Codepoint</a></dt>

<dd>
<dt><a name="Byte"
>Byte</a></dt>

<dd>
<p>Yes, Byte is both a string and a number.</p>
</dd>
</dl>

<p>The short name for <code>Grapheme</code> is typically <code>Char</code> since that&#39;s the default Unicode level. A grapheme is defined as a base codepoint plus any subsequent &#34;combining&#34; codepoints that apply to that base codepoint. Graphemes are always assigned a unique integer id which, in the case of a grapheme that has a precomposed codepoint, happens to be the same as that codepoint.</p>

<p>There is no short name for <code>CharLingua</code> because the type is meaningless outside the scope of a particular language declaration. In fact, <code>CharLingua</code> is itself an abstract type that cannot be instantiated. Instead you have names like <code>CharFrench</code>, <code>CharJapanese</code>, <code>CharTurkish</code>, etc. for instantiated <code>CharLingua</code> types. (Plus the corresponding <code>StrLingua</code> types, presumably.)</p>

<dt><a name="Matcher"
>Matcher</a></dt>

<dd>
<pre><code> subset Matcher of Mu where * !=== any(Bool,Match,Nil)</code></pre>

<p>Used to supply a test to match against. Assume <code>~~</code> will be used against it. Booleans are forbidden because they almost always indicate a programming error where the argument has been evaluated too soon against the wrong <code>$_</code>. For instance:</p>

<pre><code>grep $_ == 1, 1,2,3;        # evaluating wrong $_, so forbidden
grep { $_ == 1 }, 1,2,3;    # okay
grep * == 1, 1,2,3;         # okay</code></pre>

<dt><a name="Ordering"
>Ordering</a></dt>

<dd>
<pre><code> subset KeyExtractor of Code where { .signature === :(Any --&#62; Any) };
 subset Comparator   of Code where { .signature === :(Any, Any --&#62; Int ) };
 subset OrderingPair of Pair where { .left ~~ KeyExtractor &#38;&#38; .right ~~ Comparator };

 subset Ordering where Signature | KeyExtractor | Comparator | OrderingPair | Whatever;</code></pre>

<p>Used to handle comparisons between things. Generally this ends up in functions like <code>sort()</code>, <code>min()</code>, <code>max()</code>, etc., as a $by parameter which provides the information on how two things compare relative to each other.</p>

<dl>
<dt><a name="Comparator"
>Comparator</a></dt>

<dd>
<p>A closure with arity of 2, which for ordering returns negative/zero/positive, signaling the first argument should be before/tied with/after the second. aka &#34;The Perl 5 way&#34;.</p>

<p>For equivalence the closure returns either not 0 or 0 indicating if the first argument is equivalent or not to the second.</p>

<dt><a name="KeyExtractor"
>KeyExtractor</a></dt>

<dd>
<p>A closure with arity of 1, which returns the &#34;key&#34; by which to compare. Values are compared using <code>cmp</code> for orderings and <code>eqv</code> for equivalences, which in Perl 6 do different comparisons depending on the types. (To get a Perl 5 string ordering you must compare with <code>leg</code> instead.)</p>

<p>Internally the result of the KeyExtractor on a value should be cached.</p>

<p>Note that it is very easy to generate a simple <code>KeyExtractor</code> using <code>~*</code> for strings and <code>+*</code> for numbers, since with most simple operators <code>*</code> returns a closure of one argument.</p>

<pre><code>@sorted = sort +*, @unsorted;  #ascending numeric
@sorted = sort -*, @unsorted;  #descending numeric</code></pre>

<dt><a name="OrderingPair"
>OrderingPair</a></dt>

<dd>
<p>A combination of the two methods above, for when one wishes to take advantage of the internal caching of keys that is expected to happen, but wishes to compare them with something other than <code>eqv</code> or <code>cmp</code>, such as <code>&#60;=&#62;</code> or <code>leg</code>.</p>

<dt><a name="Signature"
>Signature</a></dt>

<dd>
<p>If a signature is specified as a criterion, the signature is bound to each value and then each parameter does comparisons in positional order according to its type, as modified by its traits. Basically, the system will write the body of the key extraction and comparison subroutine for you based on the signature.</p>

<p>For ordering the list of positional parameter comparisons is reduced as if using [||] but all comparisons do not need to be performed if an early one determines an increasing or decreasing order. For equivalence the list is reduced as if using [&#38;&#38;].</p>

<dt><a name="Whatever"
>Whatever</a></dt>

<dd>
<p>An ordering of <code>*</code> does the default comparison for the operator:</p>

<pre><code>@sorted = sort *, @unsorted;</code></pre>
</dd>
</dl>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Function_Packages"
>Function Packages</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Context"
>Context</a></h2>

<dl>
<dt><a name="caller"
>caller</a></dt>

<dd>
<p>See <a href="http://search.cpan.org/perldoc?S06#The_callframe_and_caller_functions" class="podlinkpod"
>&#34;The <code>callframe</code> and <code>caller</code> functions&#34; in S06</a>.</p>

<dt><a name="callframe"
>callframe</a></dt>

<dd>
<p>See <a href="http://search.cpan.org/perldoc?S06#The_callframe_and_caller_functions" class="podlinkpod"
>&#34;The <code>callframe</code> and <code>caller</code> functions&#34; in S06</a>.</p>

<dt><a name="EVAL"
>EVAL</a></dt>

<dd>
<pre><code> macro EVAL ( Str|Buf $code, Grammar :$lang = CALLER::&#60;$?PARSER&#62;)</code></pre>

<p>Execute <code>$code</code> as if it were code written in <code>$lang</code>. If <code>$code</code> is of type <code>Buf</code>, the same decoding techniques are applied as a compiler for <code>$lang</code> would usually do to input files.</p>

<p>The default for <code>$lang</code> is the language in effect at the exact location of the <code>EVAL</code> call.</p>

<p>Returns whatever <code>$code</code> returns, or fails when the compilation fails.</p>

<p>Note that unlike in Perl 5&#39;s <code>eval</code>, <code>EVAL</code> does not catch any exceptions or control exceptions.</p>

<dt><a name="evalfile"
>evalfile</a></dt>

<dd>
<pre><code> multi evalfile (Str $filename ; Grammar :$lang = Perl6)</code></pre>

<p>Behaves like, and replaces Perl 5 <code>do EXPR</code>, with optional <code>$lang</code> support.</p>

<dt><a name="exit"
>exit</a></dt>

<dd>
<pre><code> multi exit (Int $status = 0)</code></pre>

<p>Stops all program execution, and returns <code>$status</code> to the calling environment.</p>

<p>An exit runs all appropriate scope-leaving blocks such as <code>LEAVE</code>, <code>KEEP</code>, and <code>UNDO</code>, followed by all <code>END</code> blocks, and so cannot be skipped because they may have side effects visible outside the process. If run from an embedded interpreter, all memory must also be reclaimed.</p>

<p>Exit can also be called from an <code>END</code> block: in that case only the <code>$status</code> to be returned to the calling environment, is changed. This does end the execution of the END block in question, but will still execute any remaining <code>END</code> blocks.</p>

<p>Any threads started with the <code>:app_lifetime</code> parameter (which is basically any asynchronous action started with primitives other than <code>Thread.new</code>), will be terminated on exit.</p>

<dt><a name="sleep"
>sleep</a></dt>

<dd>
<pre><code> multi sleep ( Real $for --&#62; Nil )
 multi sleep ( Whatever --&#62; Nil )</code></pre>

<p>Attempt to sleep for up to <code>$for</code> seconds, or forever when the argument is <code>*</code>. Implementations are obligated to support sub-second resolutions if that is at all possible. You may pass any of <code>Int</code>, <code>Num</code>, <code>Rat</code>, or <code>Duration</code> types as an argument, since those all do <code>Real</code>, but regardless of which type you use, they are always scaled to seconds. (An implementation is allowed to provide access to a platform-specific function based on, say, nanoseconds, but Perl 6 does not presume to know how much resolution clocks will have in the future, so requires everything to be specified in fractional seconds.)</p>

<p>This function returns nothing; use <code>sleep-timer</code> if you wish it to return how much time is remaining on the specified sleep. However, if you really just want to keep rolling over in bed until your alarm goes off at a particular time, use <code>sleep-till</code> instead, since it is not subject to relative clock drift.</p>

<p>All of these sleep functions work only on the current thread.</p>

<dt><a name="sleep-timer"
>sleep-timer</a></dt>

<dd>
<pre><code> multi sleep-timer ( Real $for --&#62; Duration )</code></pre>

<p>Just like <code>sleep</code>, but returns the amount of time remaining to sleep as a <code>Duration</code> (which will be 0 if the call was not interrupted). Depending on the platform and the system call involved, this may or may not require emulation by interrogating the clock before and after. For those systems whose system call returns the remaining time, this can be more efficient than interrogating the clock twice yourself, However, the optimizer is encouraged to change this to a bare <code>sleep</code> in sink context. (But then, you might as well just write that in the first place.)</p>

<dt><a name="sleep-till"
>sleep-till</a></dt>

<dd>
<pre><code> multi sleep-till ( Instant $till --&#62; Bool )</code></pre>

<p>Just like <code>sleep</code>, but checks the current time and goes back to sleep if accidentally woken up early, to guarantee waiting until the specified time. Returns True if the function actually waited, or if the specified time happens to be the present moment. Returns False if you asked to sleep until a time in the past.</p>

<dt><a name="die"
>die</a></dt>

<dd>
<pre><code> multi die (@LIST)</code></pre>

<p>Throws a fatal Exception. The default exception handler prints each element of the list to $*ERR (STDERR).</p>

<dt><a name="fail"
>fail</a></dt>

<dd>
<pre><code> multi fail (Str $message)</code></pre>

<p>Can only be called inside a routine and causes the routine to <code>return</code> an unthrown exception; a <code>Failure</code> object which stringifies to <code>$message</code>. If <code>use fatal</code> is in effect where the routine was called from, it throws the exception.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Conversions"
>Conversions</a></h2>

<dl>
<dt><a name="bless"
>bless</a></dt>

<dd>
<pre><code> method bless(*@protos, *%init_args )</code></pre>

<p>Calling <code>bless</code> on any invocant (but typically a type object) to create a new object with the same class as the invocant.</p>

<p>The <code>.bless</code> method takes the first positional argument indicating a candidate to bless. If absent, the object builder implicitly asks the representation what its preferred, er, representation is.</p>

<p><code>bless</code> automatically creates an object appropriate to the representation of the class, then calls all appropriate <code>BUILD</code> routines for the current class, which initializes the object in least-derived to most-derived order. See <a href="http://search.cpan.org/perldoc?S12#Objects" class="podlinkpod"
>&#34;Objects&#34; in S12</a> for more detailed information on object creation.</p>

<dt><a name="chrs"
>chrs</a></dt>

<dd>
<dt><a name="ords"
>ords</a></dt>

<dd>
<dt><a name="chr"
>chr</a></dt>

<dd>
<dt><a name="ord"
>ord</a></dt>

<dd>
<pre><code> multi sub chrs( Int *@grid  --&#62; Str )
 multi method ords( Str $string: --&#62; List of Int ) is export
 multi method chr( Int $grid: --&#62; Char ) is export
 multi method ord( Str $string: --&#62; Int ) is export</code></pre>

<p><code>chrs</code> takes zero or more integer grapheme ids and returns the corresponding characters as a string. If any grapheme id is used that represents a higher abstraction level than the current lexical scope supports, that grapheme is converted to the corresponding lower-level string of codepoints/bytes that would be appropriate to the current pragmatic context, just as any other Str would be downgraded in context.</p>

<p><code>ords</code> goes the other direction; it takes a string value and returns character values as integers. The definition of character is pragma dependent. Normally it&#39;s a grapheme id, but under codepoints or bytes scopes, the string is coerced to the appropriate low-level view and interpreted as codepoints or bytes. Hence, under &#34;use bytes&#34; you will never see a value larger than 256, and under &#34;use codepoints&#34; you will probably never see a value larger than 0x10ffff. The only guarantee under &#34;use graphemes&#34; (the default) is that the number returned will correspond to the codepoint of the precomposed codepoint representing the grapheme, if there is such a codepoint. Otherwise, the implementation is free to return any negative unique 32-bit id. (The <code>chr</code> function will know how to backtranslate such ids properly to codepoints or bytes in any context. Note that we are assuming that every codepoint&#39;s context knows its normalization preferences, and every byte&#39;s context also knows its encoding preferences. (These are knowable in the lexical scope via the $?NF and $?ENC compile-time constants).)</p>

<p>The <code>chr</code> and <code>ord</code> variants are restricted to processing a single character. As is customary, you may pass a longer string to <code>ord</code>, but only the first character will be translated.</p>

<dt><a name="item"
>item</a></dt>

<dd>
<pre><code> multi item ( $item --&#62; Item )</code></pre>

<p>Forces generic Item context on its argument, and returns it.</p>

<dt><a name="list"
>list</a></dt>

<dd>
<pre><code> multi list ( Iterable $item --&#62; List ) { $item.iterator.list }
 multi list ( List \iter --&#62; List ) { iter }</code></pre>

<p>Almost a no-op; just makes sure that $item can be iterated.</p>

<dt><a name="flat"
>flat</a></dt>

<dd>
<pre><code> multi flat ( *@list --&#62; List )</code></pre>

<p>Forces flat context on its arguments, and returns them. The heavy work is done by the <code>*@</code> binding.</p>

<dt><a name="lol"
>lol</a></dt>

<dd>
<pre><code> multi lol ( **@list --&#62; List )</code></pre>

<p>Forces the argument list to be evaluated in lol (&#34;list of lists&#34;) context. (Subscripts treat such a list of lists as a multidimensional slice.) Any <code>Parcel</code> within the top level of the outer list will be transformed into an item (Scalar). The work is actually done by the binding to the <code>**@</code> parameter. See also the more general <code>.tree</code> method, which defaults to itemizing every level.</p>

<dt><a name="hash"
>hash</a></dt>

<dd>
<p>The <code>hash</code> contextualizer</p>

<pre><code> multi hash ( *@list --&#62; Hash )</code></pre>

<p>Forces the argument list to be evaluated in hash context. The expression is evaluated in list context (flattening any <code>Capture</code>s), then a hash will be created from the list, taken as a list of <code>Pair</code>s. (Any element in the list that is not a <code>Pair</code> will pretend to be a key and grab the next value in the list as its value.) Equivalent to <code>%()</code> (except that empty <code>%()</code> means <code>%($/)</code>, while empty <code>hash()</code> means an empty hash).</p>

<dt><a name="gist"
>gist</a></dt>

<dd>
<pre><code> multi gist( |item --&#62; Str )
 multi method gist( Mu $item: --&#62; Str )</code></pre>

<p>Produces an informal string coercion, something a human might want to see if debugging, for instance. Each type may decide its own gist representation. <code>Mu.gist</code> just calls <code>.perl</code>, but any type&#39;s <code>gist</code> method may override this to remove metainfo that a human would find to be cluttery or redundant, or to format a composite value with suitable whitespace to tell the bits apart, or to trim down an infinite list to something slightly shorter.</p>

<p><code>gist</code> is used as a last-ditch string coercion on each individual argument of various human-facing output routines, specifically <code>say</code>, <code>note</code>, <code>warn</code>, and any non-exceptional arguments to <code>die</code>. The <code>print</code> function is specifically excluded, since it&#39;s outputting to a printer. <code>:-)</code></p>

<dt><a name=":16,_:8,_:2,_:10"
>:16, :8, :2, :10</a></dt>

<dd>
<pre><code> multi prefix:&#60;:16&#62; ( Str $hexstr --&#62; Num )
 multi prefix:&#60;:8&#62; ( Str $octstr --&#62; Num )
 multi prefix:&#60;:2&#62; ( Str $binstr --&#62; Num )
 multi prefix:&#60;:10&#62; ( Str $decstr --&#62; Num )
 etc.</code></pre>

<p>Interprets string as a number, with a default hexadecimal/octal/binary/decimal radix. Any radix prefix (0b, 0d, 0x, 0o) mentioned inside the string will override this operator (this statement is true: 10 == :8(&#34;0d10&#34;)), except 0b and 0d will be interpreted as hex digits by :16 (<code>hex(&#34;0d10&#34;) == :16 &#34;0d10&#34;</code>). <code>fail</code>s on failure.</p>

<p>These aren&#39;t really functions, syntactically, but adverbial forms that just happen to allow a parenthesize argument. But more typically you&#39;ll see</p>

<pre><code>:4&#60;222&#62;
:16&#60;deadbeef&#62;</code></pre>

<p>and such.</p>

<p>Replaces Perl 5 <code>hex</code> and <code>oct</code>.</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="OS"
>OS</a></h2>

<dl>
<dt><a name="gethost"
>gethost</a></dt>

<dd>
<pre><code> multi gethost( --&#62; OS::Name )
 multi gethost( Str $name, OS::Addfamily :$type --&#62; OS::Name )
 multi method gethost( OS::Addr $addr: --&#62; OS::Name ) is export
 multi method gethost( URI $uri: --&#62; OS::Name ) is export</code></pre>

<p>The <code>gethost</code> function operates on host naming or address information and returns an <code>OS::Name</code>. An <code>OS::Name</code> is, minimally:</p>

<pre><code> class OS::Name {
   has Str $.name;
   has OS::Addr $.addr;
   has Array of Str @.aliases;
   has Array of OS::Addr @.addrs;
 }</code></pre>

<p>Such names can apply to anything which has a name that maps to an address, however, in this case the name is a hostname and the address is some sort of network identifier (e.g. an IPV4 address when resolving hosts that have IPV4 addresses).</p>

<p>When stringified, an <code>OS::Name</code> yields its name. When stringified, an <code>OS::Addr</code> yields its address in an appropriate text format (e.g. &#34;10.1.2.3&#34; for an IPV4 address).</p>

<p>The optional <code>type</code> adverb can be passed when resolving a hostname, and will filter the result to only those addresses that are of the appropriate address family. This feature may be supported by the underlying operating system, or Perl may emulate it.</p>

<p>Examples:</p>

<pre><code>  say &#34;Connection from {$socket.peer.gethost}&#34;;
  my $address = gethost(&#34;foo.example.com&#34;).addr;
  my $hostname = gethost(:addr&#60;&#34;10.1.2.3&#34;&#62;);</code></pre>

<dt><a name="chroot"
>chroot</a></dt>

<dd>
<pre><code> multi chroot ( Str $path = CALLER::&#60;$_&#62; --&#62; Bool )</code></pre>

<p>On POSIX systems, changes the process context of the current process such that the &#34;root&#34; directory becomes <code>$path</code> and all rooted paths (those that begin with a leading path separator) are relative to that path. For security reasons, many operating systems limit this functionality to the superuser. The return value will be true on success.</p>

<dt><a name="getlogin"
>getlogin</a></dt>

<dd>
<pre><code> multi getlogin ( --&#62; Str )</code></pre>

<p>Returns the username of the account running the program. This may not be as secure as using <code>getpwuid</code> on some platforms.</p>

<dt><a name="kill"
>kill</a></dt>

<dd>
<pre><code> multi kill ( OS::Signal $signal, Bool :$group, *@pids --&#62; Bool )
 multi method kill ( Proc::PID $pid: OS::Signal $signal?, Bool :$group --&#62; Bool )</code></pre>

<p>Sends the given <code>$signal</code> to the process(es) given and returns a boolean value indicating success (true) if all of the processes existed and were sent the signal and failure (false) if any of the processes did not exist or the signal could not be delivered to them.</p>

<p>The <code>$signal</code> can be initialized from an integer signal number or a string. Common signals are:</p>

<pre><code> KILL - stop the process, do not allow it to exit gracefully
 TERM - stop the process, allow it to exit gracefully
 HUP  - Hangup, often used as a request to re-run from scratch
 STOP - Pause execution
 CONT - Continue after a STOP</code></pre>

<p>Consult your operating system documentation for the full list of signal names and numbers. For compatibility, a signal name may be prefixed with &#34;SIG&#34;.</p>

<p>The method form may omit the signal. In this case, the default signal is <code>&#39;TERM&#39;</code>.</p>

<p>If the <code>:group</code> named parameter is passed, <code>kill</code> will attempt to send the signal to a process <i>group</i> rather than a single process. This functionality is platform-specific.</p>

<p>The special signal <code>0</code> can be sent which does not actually deliver a signal at all, and is used to determine if processes are still running:</p>

<pre><code>  say &#34;Still running&#34; if $proc.kill(0);</code></pre>

<dt><a name="run"
>run</a></dt>

<dd>
<dt><a name="shell"
>shell</a></dt>

<dd>
<pre><code> multi shell ( $expression,   :$bg,  :%env = %*ENV --&#62; Proc::Status )
 multi run   ( *$cmd, *@args, :$bg,  :%env = %*ENV --&#62; Proc::Status )</code></pre>

<p><code>shell</code> and <code>run</code> execute an external program, and return control to the caller once the program has exited.</p>

<p><code>shell</code> goes through the system shell (<code>cmd</code> on windows, <code>/bin/sh</code> on Unixish systems), thus interpreting all the usual shell meta characters.</p>

<p><code>run</code> treats the first argument as an executable name, and the rest of the positional arguments as command line arguments that are passed to the executable without any processing (except that it encodes Strings to buffers first, as does <code>shell</code>).</p>

<p>The return value of either function is the exit status of the program, and can be evaluated in the following contexts:</p>

<pre><code> Bool - True = success; False = failure
 Int  - Exit status (per the .exit method)</code></pre>

<p>Success is defined as returning an exit status of 0. Any other exit status returns False for failure.</p>

<p>See <code>wait</code> for more detail on how the <code>Proc::Status</code> object is used.</p>

<p>On failure to execute, the routines <code>fail()</code>.</p>

<p>If the <code>:bg</code> named parameter is passed, the program will be executed in the background, and the run command will return as soon as the child process is created. This means that the object returned is actually a <code>Proc</code>, which represents the created process.</p>

<p>[ Note: should the :bg form take rw filehandles or is that over-overloading the functionality of run? Should run be the new open with respect to executing external code? -ajs ]</p>

<p>[ Conjecture: maybe shell() and run() should support a <code>:$cwd = $*CWD</code> parameter -moritz ]</p>

<dt><a name="runinstead"
>runinstead</a></dt>

<dd>
<pre><code> multi runinstead ( ; Str $path, *@args )
 multi runinstead ( ; Str $command )</code></pre>

<p>Identical to <code>run</code> except that it never returns. The executed program replaces the currently running program in memory.</p>

<dt><a name="syscall"
>syscall</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Concurrency"
>Concurrency</a></h2>

<p>There are higher-level models of concurrency management in Perl (see <a href="http://search.cpan.org/perldoc?S17#Concurrency" class="podlinkpod"
>&#34;Concurrency&#34; in S17</a>). These functions are simply the lowest level tools</p>

<dl>
<dt><a name="fork"
>fork</a></dt>

<dd>
<pre><code> sub Processes::fork( --&#62; Proc )</code></pre>

<p>Creates a copy of the current process. Both processes return from <code>fork</code>. The original process returns the <i>child</i> process as a <code>Proc</code> object. The newly created process returns the <i>parent</i> process as a <code>Proc</code> object. As with any Proc object, the child process object numifies to the process ID (OS dependent integer). However, the parent process object numifies to <code>0</code> so that the child and parent can distinguish each other.</p>

<p>Typical usage would be:</p>

<pre><code> if !defined(my $pid = fork) {
   die &#34;Error calling fork: $!&#34;;
 } elsif $pid == 0 {
   say &#34;I am the new child!&#34;;
   exit 0;
 } else {
   say &#34;I am the parent of {+$pid}&#34;;
   wait();
 }</code></pre>

<dt><a name="wait"
>wait</a></dt>

<dd>
<pre><code> multi method wait( Proc $process: *%options --&#62; Proc::Status )

 multi wait ( Proc $process = -1, *%options --&#62; Proc::Status )</code></pre>

<p>Waits for a child process to terminate and returns the status object for the child. This status object will numify to the process ID of the child that exited.</p>

<p>Important Proc::Status methods:</p>

<pre><code> .exit - Numeric exit value
 .pid - Process ID
 .signal - Signal number if any, otherwise 0</code></pre>

<p>For historical reasons there is a <code>.status</code> method which is equal to:</p>

<pre><code> ($status.exit +&#60; 8) +| $status.signal</code></pre>

<p>If <code>$process</code> is supplied, then wait will only return when the given process has exited. Either a full <code>Proc</code> object can be passed, or just a numeric process ID. A <code>-1</code> explicitly indicates that wait should return immediately if any child process exits.</p>

<p>When called in this way, the returned <code>Proc::Status</code> object will have a <code>.pid</code> of <code>-1</code> (which is also what it numifies to) if there was no such process to wait for.</p>

<p>The named options include:</p>

<dl>
<dt><a name="blocking"
>blocking</a></dt>

<dd>
<p>Defaults to true. If set to false, this forces wait to return immediately.</p>

<dt><a name="WNOHANG"
>WNOHANG</a></dt>

<dd>
<p>Exists for historical compatibility. <code>WNOHANG =</code> 1&#62; is identical to <code>blocking =</code> False&#62;.</p>
</dd>
</dl>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Pending_Apocalypse"
>Pending Apocalypse</a></h2>

<p>The following functions are classified by Apocalypse/Synopsis numbers.</p>

<dl>
<dt><a name="A/S??:_OS_Interaction"
>A/S??: OS Interaction</a></dt>

<dd>
<p>chroot crypt getlogin /[get|set][pw|gr].*/ kill setpgrp setpriority times</p>

<p>... These are probably going to be part of POSIX, automatically imported to GLOBAL <b>if</b> the platform is the right one</p>
</dd>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Default_Functions"
>Default Functions</a></h2>

<p>These functions are exported into the default namespace</p>

<dl>
<dt><a name="all_--_see_S32-setting-library/Containers.pod"
>all -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="any_--_see_S32-setting-library/Containers.pod"
>any -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="cat_--_see_S32-setting-library/Containers.pod"
>cat -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="categorize_--_see_S32-setting-library/Containers.pod"
>categorize -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="classify_--_see_S32-setting-library/Containers.pod"
>classify -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="defined_--_see_S32-setting-library/Basics.pod"
>defined -- see S32-setting-library/Basics.pod</a></dt>

<dd>
<dt><a name="grep_--_see_S32-setting-library/Containers.pod"
>grep -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="grep-index_--_see_S32-setting-library/Containers.pod"
>grep-index -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="first_--_see_S32-setting-library/Containers.pod"
>first -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="first-index_--_see_S32-setting-library/Containers.pod"
>first-index -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="join_--_see_S32-setting-library/Containers.pod"
>join -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="keys_--_see_S32-setting-library/Containers.pod"
>keys -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="kv_--_see_S32-setting-library/Containers.pod"
>kv -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="last-index_--_see_S32-setting-library/Containers.pod"
>last-index -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="map_--_see_S32-setting-library/Containers.pod"
>map -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="max_--_see_S32-setting-library/Containers.pod"
>max -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="min_--_see_S32-setting-library/Containers.pod"
>min -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="none_--_see_S32-setting-library/Containers.pod"
>none -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="one_--_see_S32-setting-library/Containers.pod"
>one -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="pairs_--_see_S32-setting-library/Containers.pod"
>pairs -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="pick_--_see_S32-setting-library/Containers.pod"
>pick -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="print_--_see_S32-setting-library/IO.pod"
>print -- see S32-setting-library/IO.pod</a></dt>

<dd>
<dt><a name="printf_--_see_S32-setting-library/IO.pod"
>printf -- see S32-setting-library/IO.pod</a></dt>

<dd>
<dt><a name="reduce_--_see_S32-setting-library/Containers.pod"
>reduce -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="reverse_--_see_S32-setting-library/Containers.pod"
>reverse -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="roundrobin_--_see_S32-setting-library/Containers.pod"
>roundrobin -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="say_--_see_S32-setting-library/IO.pod"
>say -- see S32-setting-library/IO.pod</a></dt>

<dd>
<dt><a name="shape_--_see_S32-setting-library/Containers.pod"
>shape -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="sort_--_see_S32-setting-library/Containers.pod"
>sort -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="srand_--_see_S32-setting-library/Numeric.pod"
>srand -- see S32-setting-library/Numeric.pod</a></dt>

<dd>
<dt><a name="undefine_--_see_S32-setting-library/Basics.pod"
>undefine -- see S32-setting-library/Basics.pod</a></dt>

<dd>
<dt><a name="uri_--_see_S32-setting-library/IO.pod"
>uri -- see S32-setting-library/IO.pod</a></dt>

<dd>
<dt><a name="values_--_see_S32-setting-library/Containers.pod"
>values -- see S32-setting-library/Containers.pod</a></dt>

<dd>
<dt><a name="warn_--_see_S32-setting-library/Any.pod"
>warn -- see S32-setting-library/Any.pod</a></dt>

<dd>
<dt><a name="zip_--_see_S32-setting-library/Containers.pod"
>zip -- see S32-setting-library/Containers.pod</a></dt>
</dl>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Non-default_Functions"
>Non-default Functions</a></h2>

<p>These functions which existed in perl5 still exist, but are not part of the default namespace any more.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Container"
>Container</a></h3>

<p>The following functions can now be found in or replaced by something in the Container modules.</p>

<p>delete, exists, pop, push, shift, splice, unshift</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Numeric"
>Numeric</a></h3>

<p>See <a href="http://search.cpan.org/perldoc?S32#Numeric" class="podlinkpod"
>&#34;Numeric&#34; in S32</a>.</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="IO"
>IO</a></h3>

<p>The following functions can now be found in or replaced by something in the IO modules.</p>

<p>accept, bind, binmode, chdir, chmod, chown, close, closedir, connect eof, fcntl, fileno, flock, getc, getsockname, getsockopt, glob, ioctl, link, listen lstat, mkdir, open, opendir, pipe, print, printf, read, readdir, readline, readlink readpipe, recv, rename, rewinddir, rmdir, say, seek, seekdir, select, send, setsockopt shutdown, socket, socketpair, stat, symlink, sysopen, sysread, sysseek syswrite, tell, telldir, truncate, umask, unlink</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Temporal"
>Temporal</a></h3>

<p>The following functions can now be found in or replaced by something in the Temporal modules.</p>

<p>gmtime, localtime, time</p>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="String"
>String</a></h3>

<p>The following functions can now be found in or replaced by something in the String module.</p>

<p>chop, chomp, index, lc, pack, quotemeta, rindex, split, sprintf, substr, uc, ucfirst, unpack</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Obsolete_Functions"
>Obsolete Functions</a></h2>

<p>Some of these are obsoleted only as general functions, and are still available by using the right packages. Others are obsoleted in that they&#39;re keywords, rather than functions (these are in their own section, below).</p>

<dl>
<dt><a name="%"
>%</a></dt>

<dd>
<pre><code> $num1 % $num2</code></pre>

<p>Does a floating point modulo operation, i.e. 5.5 % 1 == 0.5 and 5 % 2.5 == 0.</p>

<dt><a name="dbmopen,_dbmclose"
>dbmopen, dbmclose</a></dt>

<dd>
<pre><code> use DB_File;</code></pre>

<dt><a name="dump"
>dump</a></dt>

<dd>
<p>Dumped. Restoring from core dumps is in any event not very useful on modern virtual-memory operating systems. Startup acceleration should be accomplished using a precompiler of some kind (details will be very implementation specific), or a pre-forking daemon such as Perl 5&#39;s App::Persistent (which will be an external module when it is ported).</p>

<dt><a name="each"
>each</a></dt>

<dd>
<p>See .pairs() method, above.</p>

<dt><a name="endpwent,_endgrent,_endservent,_endprotoent,_endnetent,_endhostent"
>endpwent, endgrent, endservent, endprotoent, endnetent, endhostent</a></dt>

<dd>
<p>The NameServices role in S16 covers most of these.</p>

<dt><a name="format,_formline"
>format, formline</a></dt>

<dd>
<p>See Exegesis 7.</p>

<dt><a name="getgrgid,_getgrnam,_getpwnam,_getpwuid"
>getgrgid, getgrnam, getpwnam, getpwuid</a></dt>

<dd>
<p>The User and Group roles in S16 cover most of these.</p>

<dt><a name="getpwent,_getgrent,_getservent,_getnetent,_gethostent"
>getpwent, getgrent, getservent, getnetent, gethostent</a></dt>

<dd>
<p>The NameServices role in S16 covers most of these.</p>

<dt><a name="length()"
>length()</a></dt>

<dd>
<p>This word is banned in Perl 6. You must specify units. In practice, this probably means you want Str.chars(), although it could be Str.bytes(), or even something else. See S32-setting-library/String for details.</p>

<dt><a name="lcfirst"
>lcfirst</a></dt>

<dd>
<p>Retired due to lack of use case</p>

<dt><a name="msgctl,_msgget,_msgrcv,_msgsnd"
>msgctl, msgget, msgrcv, msgsnd</a></dt>

<dd>
<p>See IPC::SysV</p>

<dt><a name="local"
>local</a></dt>

<dd>
<p>Replaced by <code>temp</code> which, unlike <code>local</code>, defaults to not changing the value.</p>

<dt><a name="lock"
>lock</a></dt>

<dd>
<p>See <a href="http://search.cpan.org/perldoc?S17#Concurrency" class="podlinkpod"
>&#34;Concurrency&#34; in S17</a>. <code>lock</code> has been replaced by <code>Lock.new</code> and methods on the <code>Lock</code> object.</p>

<dt><a name="pos"
>pos</a></dt>

<dd>
<p>There is no <code>pos</code> function in Perl 6 because that would not allow a string to be shared among threads. Generally you want to use <code>$/.to</code> for that now, or keep your own position variable as a lexical.</p>

<dt><a name="prototype"
>prototype</a></dt>

<dd>
<pre><code> &#38;func.meta.signature;
 &#38;func.^signature;</code></pre>

<dt><a name="ref"
>ref</a></dt>

<dd>
<p>There is no ref() any more, since it was almost always used to get the type name in Perl 5. If you really want the type name, you can use <code>$var.WHAT.perl</code>. If you really want P5 ref semantics, use <code>Perl5::p5ref</code>.</p>

<p>But if you&#39;re just wanting to test against a type, you&#39;re likely better off performing an <code>isa</code> or <code>does</code> or <code>can</code>, or just <code>$var ~~ TYPE</code>.</p>

<dt><a name="reset"
>reset</a></dt>

<dd>
<p>Was there a <i>good</i> use for this?</p>

<dt><a name="semctl,_semget,_semop"
>semctl, semget, semop</a></dt>

<dd>
<p>See IPC::SysV;</p>

<dt><a name="setpwent,_setgrent,_setservent,_setprotoent,_setnetent,_sethostent"
>setpwent, setgrent, setservent, setprotoent, setnetent, sethostent</a></dt>

<dd>
<p>The NameServices role in S16 covers most of these.</p>

<dt><a name="shmctl,_shmget,_shmread,_shmwrite"
>shmctl, shmget, shmread, shmwrite</a></dt>

<dd>
<p>See IPC::SysV;</p>

<dt><a name="study"
>study</a></dt>

<dd>
<p>Algorithm was too Anglo-centric. Could be brought back if generalized somehow.</p>

<dt><a name="tie,_tied"
>tie, tied</a></dt>

<dd>
<p>These are replaced by container types. The compiler is free to assume that any lexical variable is never going to change its container type unless some representation is made to that effect in the declaration. Note: P5&#39;s tied() is roughly replaced by P6&#39;s variable().</p>

<p>XXX Examples?</p>

<p>my $foo is ....? is tie the meta operation on the container type for &#39;rebless&#39; - macro tie ( $var, $class, *@args ) { CODE { variable($var).meta.rebless( $class, *@args ) } } )</p>

<p>endXXX</p>

<dt><a name="untie"
>untie</a></dt>

<dd>
<p>See notes on &#34;tie&#34;, above, but basically these are replaced with container classes.</p>

<dt><a name="vec"
>vec</a></dt>

<dd>
<p>Should replace <code>vec</code> with declared buffer/array of <code>bit</code>, <code>uint2</code>, <code>uint4</code>, etc.</p>

<dt><a name="waitpid"
>waitpid</a></dt>

<dd>
<p><code>wait</code> can now be called with or without an optional process/pid.</p>

<dt><a name="write"
>write</a></dt>

<dd>
<p>See Exegesis 7.</p>
</dd>
</dl>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="Keywords"
>Keywords</a></h3>

<p>The following were listed in Perl 5&#39;s perlfunc, but should now be considered keywords rather than functions.</p>

<p>last, my, next, no, our, package, return, sub, use</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Default_Export_Questions"
>Default Export Questions</a></h1>

<p>Not sure whether these are exported by default or not. Also, many may no longer exist; if so, they should be entered in the &#34;Obsolete&#34; section.</p>

<dl>
<dt><a name="Signal-related"
>Signal-related</a></dt>

<dd>
<p>alarm kill</p>

<dt><a name="OS_or_library_related"
>OS or library related</a></dt>

<dd>
<pre><code> chroot
 crypt
 getlogin
 getpeername -- should this go on Pipe?</code></pre>

<p>OS objects:</p>

<pre><code> --Process
 getpgrp
 getppid
 getpriority
 setpgrp
 setpriority

 --Service
 getservbyname
 getservbyport

 --Protocol
 getprotobyname
 getprotobynumber

 --Network
 getnetbyaddr
 getnetbyname

 --Host
 gethostbyaddr
 gethostbyname</code></pre>

<dt><a name="Flow_control"
>Flow control</a></dt>

<dd>
<p>succeed proceed redo</p>

<dt><a name="Other"
>Other</a></dt>

<dd>
<p>caller chr die do EVAL exec exit fork goto hex import int oct ord require scalar sleep state syscall system times utime wait</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Additions"
>Additions</a></h1>

<p>Please post errors and feedback to perl6-language. If you are making a general laundry list, please separate messages by topic.</p>

<!-- end doc -->

</body></html>
